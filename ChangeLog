2004-08-29  Remi Denis-Courmont

	* src/privproc.*, src/miredo.cpp:
	- do not use privsep for Teredo relay/server,
	  it was broken anyway (relays must use a Teredo route, not a
	  Teredo address),
	- fix setuid for Teredo client,
	* libteredo/relay.cpp:
	- fixed memory leak when recycling peer entry,
	- fixed memory leak in Packet transmission,
	- implemented client packet reception,
	- check confirmation byte from server,
	* libteredo/teredo-udp.*:
	- support for getting the confirmation byte in auth header.

2004-08-28  Remi Denis-Courmont

	* src/privproc.cpp:
	- fixed nasty memcpy instead of memcmp typing error,
	- cleaned up.
	* libteredo/relay.cpp:
	- initial support for Teredo client qualification.
	* libteredo/relay-packets.*:
	- code split from libteredo/relay.cpp.

2004-08-27  Remi Denis-Courmont

	* libteredo/teredo-udp.*:
	- replaced thread-unsafe by design TeredoCommonUDP class,
	  with TeredoPacket: Smaller memory footprint,
	  libteredo nearly thread-safe.

2004-08-25  Remi Denis-Courmont

	* libterdo/relay.cpp, configure.ac, src/Makefile.am:
	- use OpenSSL to sets the authentication nonce,
	* libteredo/relay.*, src/relay.*, src/main.cpp, src/miredo.*:
	- only specify one server name for client, much less confusing,
	* libtun6/ipv6-tunnel.cpp:
	- use writev()/readv() to avoid using memcpy(),
	- fixes SendPacket's return value.

2004-08-24  Remi Denis-Courmont

	* src/main.c:
	- option to enable cone relay optimization;
	Miredo will now assume restricted relay by default,
	- command line support for client mode,
	- verbose option for the command line,
	* README, NEWS, miredo.8:
	- reflect above command line change,
	* src/miredo.*:
	- checks validity of Teredo prefix before using it,
	* src/miredo.*, src/relay.*, libteredo/relay.*:
	- support for creating a Teredo client instance,
	* libteredo/teredu-udp.cpp:
	- simpler parsing of incoming Teredo packets.

2004-08-22  Remi Denis-Courmont

	* libteredo/relay.*:
	- support for relay behind restricted NAT,
	- partial support for client packet transmission.

2004-08-18  Remi Denis-Courmont

	* src/miredo.cpp, src/privproc.*:
	- fixed privileged process.

2004-08-17  Remi Denis-Courmont

	* libtun6/ipv6-tunnel.*:
	- libtun6 made thread-safe
	* libteredo/relay.*:
	- removed ReceiveIPv6Packet callback (one step toward
	re-entrancy and thread-safety),
	- tunnel addresses changes implemented
	* src/miredo.cpp, src/relay.*:
	- implemented a privileged process to set up tunnel addresses.

2004-07-31  Remi Denis-Courmont

	* libteredo/*, src/*:
	- huge code split: libteredo handles teredo in userland
	miredo links libteredo with libtun6.

2004-07-14  Remi Denis-Courmont

	* src/main.c (init-security):
	- do not setsid if nodetach mode is enabled,
	- do not chroot if running as root.

2004-07-12  Remi Denis-Courmont

	* src/teredo-udp.cpp (MiredoCommonUDP::ReceivePacket):
	- supposedly fixed alignments issues.
	* src/main.c:
	- more explicit error messages.

2004-07-11  Remi Denis-Courmont

	* src/teredo-udp.cpp:
	- fixed call to recvfrom() that caused problems with
	  determining UDP packets source,
	* src/server.cpp:
	- fixed likely byte-alignments issues (teredo_send_ra),
	- clean up, use of MiredoServer class

2004-07-10  Remi Denis-Courmont

	* libtun6.ipv6-tunnel.c:
	- no longer (try to) bring iface down in ~IPv6Tunnel(),
	* configure.ac:
	- removed --enable-miredo-group, use user's group instead,
	* src/main.c:
	- support for chroot(),
	- ability to override setuid user from the command line,
	* src/relay.cpp:
	- do not print routing warning when receiving multicast packet,
	* src/miredo.cpp:
	- daemonize before setuid,
	- ability to reload (not yet existing) the configuration file,
	- initial signal handling.

2004-06-27  Remi Denis-Courmont

	* include/teredo.c:
	- allow unknown Teredo address flags, as specified per new draft 02,
	* src/server_pkt.cpp:
	- clean ups,
	- set IPv6 source correctly in server Router Advertisements,
	* src/relay.cpp, src/server_pkt.cpp:
	- check that destination matches 2000:/3 before transmitting,
	- use user-specified Teredo prefix, rather than hardcoded one,
	* libtun6/ipv6-tunnel.cpp, libtun6/ipv6-tunnel.h:
	- sanity checks,
	- fix byte ordering for sending/receiving packets on FreeBSD,
	- separated from Miredo's own sources.

2004-06-26  Remi Denis-Courmont

	* miredo.8, Makefile.am:
	- initial man page,
	* src/miredo.cpp, src/relay.cpp:
	- removed useless memory checks (the program will be killed if we run
	  out of memory anyway),
	- check that server primary IPv4 address is a global unicast one.

2004-06-25  Remi Denis-Courmont

	* src/ipv6-tunnnel.cpp:
	- compile fix for broken pre-08-2003 Kame implementations,
	- fixed support for adding/deleting tunnel addresses on FreeBSD.

2004-05-24  Remi Denis-Courmont

	* src/ipv6-tunnel.cpp:
	- support for FreeBSD tunneling driver (still a stupid compilation
	  error, routing change not implemented).

2004-05-20  Remi Denis-Courmont

	* configure.ac, src/*:
	- FreeBSD compilation fixes, except tunneling driver.
	* src/main.cpp, src/ipv6-tunnel.cpp, src/miredo.cpp:
	- removed useless option to specify tunnel device file,
	- automatically add a route to the tunnel for the Teredo prefix.

2004-05-19  Remi Denis-Courmont

	* src/main.cpp, src/miredo.cpp:
	- automatic interface addres configuration,
	- properly drop additionnal POSIX groups.

2004-05-17  Remi Denis-Courmont

	* src/miredo.cpp, src/ipv6-tunnel.cpp:
	- set Teredo interface MTU to 1280 bytes,
	- setup Teredo interface address,
	- support for changing Teredo's prefix,
	- detach in the background.

2004-05-15  Remi Denis-Courmont

	* src/main.c, src/miredo.cpp:
	- support for changing Teredo relay/client port,
	- automatic relay IPv4 address selection.

2004-05-14  Remi Denis-Courmont

	* src/main.c, configure.ac:
	- support for non-root miredo user/group,
	* src/ipv6-tunnel.cpp:
	- automatically bring tunnel interface up.

2004-05-12  Remi Denis-Courmont

	* main.c:
	- getopt-based command line handling: in particular,
	  support for disabling server and/or relay,
	* miredo.cpp, main.c:
	- split from main.cpp, partial code cleanup.

2004-05-07  Remi Denis-Courmont

	* README:
	- initial english-public version,
	- removed French internal doc.
	* doc/*:
	- removed non-GPL documentation,
	* dump/*:
	- removed possibly ECP-ownership encumbered files.

2004-03-27  Rémi Denis-Courmont

	* src/*: forwarding of packet from UDP to IPv6 or from UDP to
	UDP for the server. Server implementation should be complete,
	possibly with bugs.

2004-03-22  Rémi Denis-Courmont

	* src/*: 
	- hopefully fixed the handling if the "Cone" flag for client
	qualification => client should now qualify properly with the
	server,
	- (partial) Solaris 8 compilation fix.

2004-03-21  Rémi Denis-Courmont

	* src/server_pkt.cpp:
	- sending of Router Advertisement for client "qualification".

2004-03-20  Rémi Denis-Courmont

	* src/teredo-udp.cpp:
	- parsing of Teredo packets headers.

2004-03-14  Rémi Denis-Courmont

	* src/main.cpp:
	- initial source code (non-working).

2004-03-10  Rémi Denis-Courmont

	* configure.ac, Makefile.am:
	- initial CVS repository,
	- initial configure scripts, and Makefiles.

